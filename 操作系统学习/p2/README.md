
## 进程

#### 执行顺序
- 程序顺序执行：一个程序执行之后才能另一个执行
- 程序并发执行：程序交替执行，间歇性且不封闭造成了无法重现结果

#### 进程的定义
- 为了解决并发执行无法重现结果，为程序建立进程来描述和控制程序
- 系统为之配置了专门的数据结构，来控制和管理每一个进程
- 进程是进程实体的运行过程，是系统进程资源分配和调度的一个独立单位
- 特征：动态性(具有生命周期创建-调度-销毁)、并发性、独立性、异步性

#### 进程状态及转换
- 就绪状态：就是已经分配好除了CPU以外资源，存储到就绪队列，供CPU随时执行
- 执行状态：获取到cpu资源执行程序
- 阻塞状态：由于I/O请求、等其他不能继续执行，会将处理机分配给其他进程
- 创建状态：创建一个进程，先创建PCB填写控制管理进程信息，然后分配资源，分配合适资源后会成为就绪状态。如果在分配过程中
内存不够以及其他情况，那么就一直处于创建状态
- 终止状态：执行完成，释放资源PCB


#### 系统管理控制的数据结构
- 内存表
- 设备表
- 文件表
- 进程管理表

#### 进程管理
- PCB(进程管理块)：让每一个不能独立运行的程序成为独立运行的单位，与其他程序并发的进程

##### 进程管理块信息
- 进程标识：外部标识(用户访问/进程通信)、内部标识(系统调度)
- 处理机状态：通用寄存器、指令计算器、程序状态、用户栈指针
- 进程调度信息：当前状态、优先级、其他信息
- 进程控制信息

#### 操作系统内核
- 我们把一些常驻内存的进程程序叫做操作内核，一般都是与硬件经常交互的经常和程序软件
- 处理机状态：系统状态-可以执行任何指令和操作任何资源，用户状态-又特定的一些列指令。为了保护OS


#### 常用的内核软件
- 支撑功能-中断功能：最基础的功能，再执行一个一个片段或者程序其他错误的时候中断，等待调度进程
- 支撑功能-时钟管理：基础功能，提供片段为进程并行执行，发出中断请求
- 支撑功能-原语功能：一些列不能中断的指令，常驻内存中
- 进程管理：进程的调度/创建/分配/销毁等软件操作程序，常驻内存
- 内存管理：频繁的去操作内存空间，提高运行速度
- 设备管理：设备和硬件相连，频繁操作。


#### 创建进程
- 事件-用户登录：系统为用户创建进程
- 事件-任务调度
- 事件-应用请求
- 事件-提供服务
- 创建-申请PCB
- 创建-分配资源：内存、I/O设备、CPU时段、文件
- 创建-初始化PCB
- 创建-送入就绪列表

#### 中止进程
- 正常结束：进程程序运行结束
- 异常结束：越界/保护/非法指令/运行超时等
- 外界干预
- 过程-接收到结束进程标识，从PCB中找出进程
- 过程-结束进程子进程和进程
- 过程-从PCB链表中移除经常信息


#### 进程同步概念

###### 对多个进程的执行顺序管理，让并行的进程按照一定的次序共享系统资源
- 间接相互制约：对临界资源互斥访问
- 直接相互制约：进程之间的协调访问

#### 同步操作
- 资源数：num
- wait(num)：每次调用 wait num 减少要给，num 少于1 ，则锁死
- sigal(num): 每次都是添加一个
```
function start() {
    const buffer = []
    let total = 10
    function wait(prod) {
        if (total < 0) return
        buffer.push(prod)
        total--
    }
    function signal(prod) {
        if (total >= 10) return
        total++
        buffer.splice(buffer.indexOf(prod), 1)
    }
    function create() {
        while (1) {
            const prod = 'food'
            wait(prod)
        }
    }
    function eat() {
        while (1) {
            const prod = 'food'
            signal(prod)
        }
    }
    create()
    eat()
}
start()

```

#### 进程的通信
- 共享存储系统：提供一个共享的存储区
- 管道传输系统：一个连接了读进程和写进程的文件(读进程讲数据写入文件，写进程将数据拿出)，属于同步操作
- 消息传输系统：通过命令传递消息
- 客户机-服务器系统

#### 客户机-服务器系统
- 套接字-定义：就是进程通信标识类型的数据结构
- 套接字-内容：通信目的地址、端口号、网络协议、进程网络地址、以及提供了不同api
- 套接字-基于文件型：在同一个机器中，类似于管道数据系统，有一个特殊的文件进行通信
- 套接字-网络型：不同主机间进程的通信，发送进程的主机分配一个端口号，接收进程主机用某个端口号接收









